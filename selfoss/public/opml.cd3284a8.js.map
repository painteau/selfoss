{"mappings":"YAAA,IAAMA,EAAOC,SAASC,cAAc,QAC9BC,EAAeF,SAASC,cAAc,sBACtCE,EAASH,SAASC,cAAc,sBAEtC,SAASG,EAAWC,GAChB,OAAOA,EAAKC,QAAO,KAAO,SAASA,QAAO,KAAO,QAAQA,QAAO,KAAO,O,CAG3E,SAASC,EAAaC,GAClB,OAAQA,UAAY,IAAIC,IAAIL,GAAYM,KAAK,O,CAGjDX,EAAKY,iBAAiB,UAAU,SAAAC,GAC5BA,EAAEC,iBAEF,IAAMC,EAAwBX,EAAOY,MAErCZ,EAAOa,UAAW,EAClBb,EAAOY,MAAQ,aACfb,EAAae,UAAY,GAEzB,IAAMC,EAAU,IAAIC,QAAQpB,EAAKqB,OAAQ,CACrCC,OAAQ,OACRC,KAAM,IAAIC,SAASxB,KAGvByB,MAAMN,GAASO,MAAK,SAAAC,GAChB,OAAOA,EAASC,OAAOF,MAAK,SAAAG,G,IAAEpB,EAAQoB,EAARpB,SACF,MAApBkB,EAASG,OACT3B,EAAae,UAAY,0BAAiDa,OAAvBvB,EAAaC,GAAU,+FAC/C,MAApBkB,EAASG,OAChB3B,EAAae,UAAY,sEAA6Fa,OAAvBvB,EAAaC,GAAU,QAC3F,MAApBkB,EAASG,OAChB3B,EAAae,UAAY,yEAAgGa,OAAvBvB,EAAaC,GAAU,QAEzHN,EAAae,UAAY,2DAAgGa,OAArC1B,EAAW2B,KAAKC,UAAUxB,IAAW,uB,OAGlIyB,OAAM,SAAAC,GACLhC,EAAae,UAAY,2DAA2Fa,OAAhC1B,EAAW2B,KAAKC,UAAUE,IAAM,uB,IACrHC,SAAQ,WACPhC,EAAOa,UAAW,EAClBb,EAAOY,MAAQD,C","sources":["js/opml.js"],"sourcesContent":["const form = document.querySelector('form');\nconst msgContainer = document.querySelector('.message-container');\nconst submit = document.querySelector('input[type=submit]');\n\nfunction escapeHtml(text) {\n    return text.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n}\n\nfunction listMessages(messages) {\n    return (messages ?? []).map(escapeHtml).join('<br>');\n}\n\nform.addEventListener('submit', e => {\n    e.preventDefault();\n\n    const originalButtonCaption = submit.value;\n\n    submit.disabled = true;\n    submit.value = 'Importingâ€¦';\n    msgContainer.innerHTML = '';\n\n    const request = new Request(form.action, {\n        method: 'POST',\n        body: new FormData(form)\n    });\n\n    fetch(request).then(response => {\n        return response.json().then(({messages}) => {\n            if (response.status === 200) {\n                msgContainer.innerHTML = `<p class=\"msg success\">${listMessages(messages)} You might want to <a href=\"update\">update now</a> or <a href=\"./\">view your feeds</a>.</p>`;\n            } else if (response.status === 202) {\n                msgContainer.innerHTML = `<p class=\"msg error\">The following feeds could not be imported:<br>${listMessages(messages)}</p>`;\n            } else if (response.status === 400) {\n                msgContainer.innerHTML = `<p class=\"msg error\">There was a problem importing your OPML file:<br>${listMessages(messages)}</p>`;\n            } else {\n                msgContainer.innerHTML = `<p class=\"msg error\">Unexpected happened. <details><pre>${escapeHtml(JSON.stringify(messages))}</pre></details></p>`;\n            }\n        });\n    }).catch(err => {\n        msgContainer.innerHTML = `<p class=\"msg error\">Unexpected happened. <details><pre>${escapeHtml(JSON.stringify(err))}</pre></details></p>`;\n    }).finally(() => {\n        submit.disabled = false;\n        submit.value = originalButtonCaption;\n    });\n});\n"],"names":["$75d4586e8577a3ed$var$form","document","querySelector","$75d4586e8577a3ed$var$msgContainer","$75d4586e8577a3ed$var$submit","$75d4586e8577a3ed$var$escapeHtml","text","replace","$75d4586e8577a3ed$var$listMessages","messages","map","join","addEventListener","e","preventDefault","originalButtonCaption","value","disabled","innerHTML","request","Request","action","method","body","FormData","fetch","then","response","json","param","status","concat","JSON","stringify","catch","err","finally"],"version":3,"file":"opml.cd3284a8.js.map"}