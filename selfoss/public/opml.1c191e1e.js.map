{"mappings":"AAAA,MAAMA,EAAOC,SAASC,cAAc,QAC9BC,EAAeF,SAASC,cAAc,sBACtCE,EAASH,SAASC,cAAc,sBAEtC,SAASG,EAAWC,GAChB,OAAOA,EAAKC,QAAO,KAAO,SAASA,QAAO,KAAO,QAAQA,QAAO,KAAO,O,CAG3E,SAASC,EAAaC,GAClB,OAAQA,GAAY,IAAIC,IAAIL,GAAYM,KAAK,O,CAGjDX,EAAKY,iBAAiB,UAAUC,IAC5BA,EAAEC,iBAEF,MAAMC,EAAwBX,EAAOY,MAErCZ,EAAOa,UAAW,EAClBb,EAAOY,MAAQ,aACfb,EAAae,UAAY,GAEzB,MAAMC,EAAU,IAAIC,QAAQpB,EAAKqB,OAAQ,CACrCC,OAAQ,OACRC,KAAM,IAAIC,SAASxB,KAGvByB,MAAMN,GAASO,MAAKC,GACTA,EAASC,OAAOF,MAAK,EAACjB,SAACA,MACF,MAApBkB,EAASE,OACT1B,EAAae,UAAY,0BAA0BV,EAAaC,gGACrC,MAApBkB,EAASE,OAChB1B,EAAae,UAAY,sEAAsEV,EAAaC,SACjF,MAApBkB,EAASE,OAChB1B,EAAae,UAAY,yEAAyEV,EAAaC,SAE/GN,EAAae,UAAY,2DAA2Db,EAAWyB,KAAKC,UAAUtB,yBAAgC,MAGvJuB,OAAMC,IACL9B,EAAae,UAAY,2DAA2Db,EAAWyB,KAAKC,UAAUE,yBAA2B,IAC1IC,SAAQ,KACP9B,EAAOa,UAAW,EAClBb,EAAOY,MAAQD,CAAqB,GACtC","sources":["js/opml.js"],"sourcesContent":["const form = document.querySelector('form');\nconst msgContainer = document.querySelector('.message-container');\nconst submit = document.querySelector('input[type=submit]');\n\nfunction escapeHtml(text) {\n    return text.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n}\n\nfunction listMessages(messages) {\n    return (messages ?? []).map(escapeHtml).join('<br>');\n}\n\nform.addEventListener('submit', e => {\n    e.preventDefault();\n\n    const originalButtonCaption = submit.value;\n\n    submit.disabled = true;\n    submit.value = 'Importingâ€¦';\n    msgContainer.innerHTML = '';\n\n    const request = new Request(form.action, {\n        method: 'POST',\n        body: new FormData(form)\n    });\n\n    fetch(request).then(response => {\n        return response.json().then(({messages}) => {\n            if (response.status === 200) {\n                msgContainer.innerHTML = `<p class=\"msg success\">${listMessages(messages)} You might want to <a href=\"update\">update now</a> or <a href=\"./\">view your feeds</a>.</p>`;\n            } else if (response.status === 202) {\n                msgContainer.innerHTML = `<p class=\"msg error\">The following feeds could not be imported:<br>${listMessages(messages)}</p>`;\n            } else if (response.status === 400) {\n                msgContainer.innerHTML = `<p class=\"msg error\">There was a problem importing your OPML file:<br>${listMessages(messages)}</p>`;\n            } else {\n                msgContainer.innerHTML = `<p class=\"msg error\">Unexpected happened. <details><pre>${escapeHtml(JSON.stringify(messages))}</pre></details></p>`;\n            }\n        });\n    }).catch(err => {\n        msgContainer.innerHTML = `<p class=\"msg error\">Unexpected happened. <details><pre>${escapeHtml(JSON.stringify(err))}</pre></details></p>`;\n    }).finally(() => {\n        submit.disabled = false;\n        submit.value = originalButtonCaption;\n    });\n});\n"],"names":["$1f4607da9cbb46b1$var$form","document","querySelector","$1f4607da9cbb46b1$var$msgContainer","$1f4607da9cbb46b1$var$submit","$1f4607da9cbb46b1$var$escapeHtml","text","replace","$1f4607da9cbb46b1$var$listMessages","messages","map","join","addEventListener","e","preventDefault","originalButtonCaption","value","disabled","innerHTML","request","Request","action","method","body","FormData","fetch","then","response","json","status","JSON","stringify","catch","err","finally"],"version":3,"file":"opml.1c191e1e.js.map"}